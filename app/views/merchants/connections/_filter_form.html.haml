%table.table.table-striped
  %tbody
    .form
      = form_for :user, url: search_merchants_connections_path, method: :post, html: {id: 'filter_form', class: 'form-horizontal'} do |f|
        %tr
          %td
            - selected = (params and params[:name]) ? params[:name] : ''
            = text_field_tag 'name', selected, :placeholder => 'Enter user name', class: 'span12'
          %td
            - selected = (params and params[:email]) ? params[:email] : ''
            = text_field_tag :email, selected, :placeholder => 'Enter user email', class: 'span12'
          %td
            - selected = params['label_ids'].nil? ? (params[:email] ? params['label_ids'] : @names.first.id) : params['label_ids'].map{|x| x}
            = select_tag "label_ids[]", options_from_collection_for_select(@names, :id, :name, selected),{multiple: 'multiple', class: 'chzn-select span12', 'data-placeholder' => 'Segment your customers by entering a label for them'}
          %td
            = f.submit "Search" , class: "btn btn-primary"