= banner("Template Properties")

= render partial: "merchants/messages/message_menu"

  
#merchants.container-fluid.pad3pc
  = render :partial => 'progress_bar'

  %ul.template-property-menu
    %li
      #template_properties_container.row-fluid.no-pad
        = form_tag assign_template_merchants_message_path(@message.uuid), method: :put, class: '', id: 'template_properties_form' do
          .modal.hide.fade#template_name
            .modal-header
              %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", type: "button"}
              %h3 Set Template Name
            .modal-body
              .control-group
                = label_tag(:name, "Template Name", class: 'control-label')
                .controls
                  = text_field_tag :name, nil, id: 'template_name_field', class: 'span12'
                  %small Required field.
            .modal-footer
              %a#assign_template_name.btn.btn-success{href: "javascript:void(0)"} Save Changes
              %a.btn{"aria-hidden" => "true", "data-dismiss" => "modal"} Cancel

          .tab-content-pane
            = hidden_field_tag :merchants_selectable_properties_preview_path, merchants_selectable_properties_preview_path(@message.uuid, @template.uuid)
            = hidden_field_tag :template_id, @template.uuid

            %span{:'data-selectable-properties' => @properties.to_json, style: "width:0px;height:0px;", class: 'template-selectable-properties'}

            %ul#template_properties_tab.nav.nav-tabs
              %li
                %a{href: "#template_content", class: 'template-property-tab'} Content
              - if is_sidebar_template(@template.name)
                %li
                  %a{href: "#template_sidebar", class: 'template-property-tab'} Sidebar
              - if is_hero_template(@template.name)
                %li
                  %a{href: "#template_sidebar", class: 'template-property-tab'} Sidebar
              %li
                %a{href: "#template_header", class: 'template-property-tab'} Header
              %li
                %a{href: "#template_layout", class: 'template-property-tab'} Layout

            .tab-content.pad3pc
              #template_content.tab-pane
                .control-group
                  = label_tag "background_color", "Background Color", class: 'control-label'
                  .controls
                    %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                      .btn-group
                        %a.dropdown-toggle{"data-toggle" => "dropdown"}
                          = text_field_tag "properties[content][css][background-color]", '', class: 'input-medium'
                          %span.add-on
                            %i{:style => "background-color: ''"}

                .control-group
                  = label_tag "title_color", "Title Color:", class: 'control-label'
                  .controls
                    %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                      .btn-group
                        %a.dropdown-toggle{"data-toggle" => "dropdown"}
                          = text_field_tag "properties[content][headline][css][color]", "", class: 'template-color-field input-medium'
                          %span.add-on
                            %i{:style => "background-color: ''"}

                .control-group
                  = label_tag "link_color", "Link Color:", class: 'control-label'
                  .controls
                    %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                      .btn-group
                        %a.dropdown-toggle{"data-toggle" => "dropdown"}
                          = text_field_tag "properties[content][link][css][color]", "", class: 'template-color-field input-medium'
                          %span.add-on
                            %i{:style => "background-color: ''"}

                .control-group
                  = label_tag "paragraph_color", "Paragraph Color:", class: 'control-label'
                  .controls
                    %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                      .btn-group
                        %a.dropdown-toggle{"data-toggle" => "dropdown"}
                          = text_field_tag "properties[content][paragraph][css][color]", "", class: 'template-color-field input-medium'
                          %span.add-on
                            %i{:style => "background-color: ''"}

                .actions
                  .pull-left
                    %a{href: "javascript:void(0)", class: "btn btn-info template-property-action", 'data-tab' => "#{next_tab('template_header', @template.name)}"}
                      %i{class: "icon-arrow-left"}

                  .pull-right
                    %a{href: "javascript:void(0)", class: "btn btn-success template-property-submit"}
                      Go
                      %i{class: "icon-thumbs-up"}
                      
              - if is_sidebar_template(@template.name)
                #template_sidebar.tab-pane
                  .control-group
                    = label_tag "background_color", "Background Color", class: 'control-label'
                    .controls
                      %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                        .btn-group
                          %a.dropdown-toggle{"data-toggle" => "dropdown"}
                            = text_field_tag "properties[sidebar][css][background-color]", '', class: 'input-medium'
                            %span.add-on
                              %i{:style => "background-color: ''"}

                  .control-group
                    = label_tag "title_color", "Title Color:", class: 'control-label'
                    .controls
                      %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                        .btn-group
                          %a.dropdown-toggle{"data-toggle" => "dropdown"}
                            = text_field_tag "properties[sidebar][headline][css][color]", "", class: 'template-color-field input-medium'
                            %span.add-on
                              %i{:style => "background-color: ''"}

                  .control-group
                    = label_tag "link_color", "Link Color:", class: 'control-label'
                    .controls
                      %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                        .btn-group
                          %a.dropdown-toggle{"data-toggle" => "dropdown"}
                            = text_field_tag "properties[sidebar][link][css][color]", "", class: 'template-color-field input-medium'
                            %span.add-on
                              %i{:style => "background-color: ''"}

                  .control-group
                    = label_tag "paragraph_color", "Paragraph Color:", class: 'control-label'
                    .controls
                      %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                        .btn-group
                          %a.dropdown-toggle{"data-toggle" => "dropdown"}
                            = text_field_tag "properties[sidebar][paragraph][css][color]", "", class: 'template-color-field input-medium'
                            %span.add-on
                              %i{:style => "background-color: ''"}

                  .actions
                    .pull-left
                      %a{href: "javascript:void(0)", class: "btn btn-info template-property-action", 'data-tab' => 'template_header'}
                        %i{class: "icon-arrow-left"}

                    .pull-right
                      %a{href: "javascript:void(0)", class: "btn btn-success template-property-action", 'data-tab' => 'template_content'}
                        %i{class: "icon-arrow-right"}

              - if is_hero_template(@template.name)
                #template_sidebar.tab-pane
                  = render :partial => "sidebar_menu", :locals => {:template_id => "rightSidebar"}
                  = render :partial => "sidebar_menu", :locals => {:template_id => "leftSidebar"}
                  .actions
                    .pull-left
                      %a{href: "javascript:void(0)", class: "btn btn-info template-property-action", 'data-tab' => 'template_header'}
                        %i{class: "icon-arrow-left"}

                    .pull-right
                      %a{href: "javascript:void(0)", class: "btn btn-success template-property-action", 'data-tab' => 'template_content'}
                        %i{class: "icon-arrow-right"}

              #template_header.tab-pane
                .control-group
                  = label_tag "background_color", "Background Color", class: 'control-label'
                  .controls
                    %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                      .btn-group
                        %a.dropdown-toggle{"data-toggle" => "dropdown"}
                          = text_field_tag "properties[header][css][background-color]", "", class: 'template-color-field input-medium'
                          %span.add-on
                            %i{:style => "background-color: ''"}

                .control-group
                  = label_tag "font_family", "Font Family", class: 'control-label'
                  .controls
                  = select_tag "properties[header][headline][css][font-family]", options_for_select(@header_font_families), class: 'input-medium'

                .control-group
                  = label_tag "title_color", "Title Color:", class: 'control-label'
                  .controls
                    %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                      .btn-group
                        %a.dropdown-toggle{"data-toggle" => "dropdown"}
                          = text_field_tag "properties[header][headline][css][color]", "", class: 'template-color-field input-medium'
                          %span.add-on
                            %i{:style => "background-color: ''"}

                .control-group
                  = label_tag "logo", "Logo", class: 'control-label'
                  .controls
                    = radio_button_tag "properties[header][logo]", "image"
                    = "Image"
                    = radio_button_tag "properties[header][logo]", "text"
                    = "Text"
                    %br
                    %br                    
                    = hidden_field_tag "properties[header][template_uuid]", @template.uuid
                    = text_field_tag 'text', @template.title, :placeholder => 'Enter logo name', class: 'logo_text',name: "properties[header][logo_text]"
                    = hidden_field_tag "properties[header][message_uuid]" , @message.uuid

                .control-group.social-share
                  = label_tag "social_sharing", "Social Sharing", class: 'control-label'
                  .controls
                  
                    = check_box "properties[header][facebook]", "show",id: "facebook-setting"
                    = "Facebook"
                    
                    = check_box "properties[header][twitter]","show", id: "twitter-setting"
                    = "Twitter"

                    = hidden_field_tag "properties[header][shareurl]", @public_msg
                    = hidden_field_tag "properties[header][text]", @msg

                /Header Logo or Header Name
                .actions
                  .pull-left
                    %a{href: "javascript:void(0)", class: "btn btn-info template-property-action", 'data-tab' => 'template_layout'}
                      %i{class: "icon-arrow-left"}

                  .pull-right
                    %a{href: "javascript:void(0)", class: "btn btn-success template-property-action", 'data-tab' => "#{next_tab("template_content", @template.name)}"}
                      %i{class: "icon-arrow-right"}

              #template_layout.tab-pane
                .control-group
                  = label_tag "background_color", "Background Color", class: 'control-label'
                  .controls
                    %span.template-color-field.input-append.color{"data-color" => '', "data-color-format" => "hex"}
                      .btn-group
                        %a.dropdown-toggle{"data-toggle" => "dropdown"}
                          = text_field_tag "properties[layout][css][background-color]", "", class: 'template-color-field input-medium'
                          %span.add-on
                            %i{:style => "background-color: ''"}
                .actions
                  .pull-right
                    %a{href: "javascript:void(0)", class: "btn btn-success template-property-action", 'data-tab' => 'template_header'}
                      %i{class: "icon-arrow-right"}

  #template_pane
    %iframe#customHtmlTemplate{:src => merchants_default_settable_properties_preview_path(@message.uuid, @template.uuid), :frameborder => 0, :scrolling => "yes", style: "width: 100%; height:100%; min-height: 600px;"}
      %html
        %body
          %strong
            Loading...

= form_tag(upload_template_image_merchants_message_path(@message.uuid), method: :post,class: "hide image_form", id: 'logo_form', enctype: "multipart/form-data", "data-remote" => true, style: "position: relative; left: -310px;top: -1130px;color:white")  do
  = hidden_field_tag "logo",true
  = hidden_field_tag :template_uuid, @template.uuid
  = link_to "Change Image" , "#", class: "change_image btn btn-success hide"
  = file_field_tag "imgfile", class: "browsBtn"
  = submit_tag "Submit", class: "save_image"
  %img{class: "loading", src: "/assets/ajax-loader.gif", style: "display:none;"}

