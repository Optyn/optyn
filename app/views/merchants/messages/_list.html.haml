%table.table.table-striped.table-hover.message-list
  %thead
    %tr
      %th= check_box_tag :select, '', false, class: 'select-all'
      %th Campaign Name
      %th Name
      %th= timestamp_header
      %th Reports

  %tbody
    - unless @messages.blank?
      - @messages.each do |message|
        %tr
          %td
            = check_box_tag :uuid, message.uuid, false, class: 'real'
          %td.show-link
            = message_type_title(message)
          %td.show-link
            = message.name
          %td.show-link
            = formatted_message_form_datetime(message, timestamp_attr)
          %td.show-link-address.display-none
            - if message.instance_of?(TemplateMessage)
              = template_merchants_message_path(message.uuid)
            - else
              = edit_merchants_message_path(message.uuid)

          %td
            - if message.sent?
              %a{:href => "#reportDialog_#{message.uuid}", "data-toggle" => "modal", "data-id" => "#{message.uuid}", "class" => "open-reports"} report
              = render :partial => "report", :locals => {:message => message, :timestamp_attr => timestamp_attr}
              %a{:href => "#clickReportDialog_#{message.uuid}", "data-toggle" => "modal", "data-uuid" => "cr-#{message.uuid}", "class" => "click-reports"} Click report
              = render :partial => "click_report", :locals => {:message => message}

            -else
              NA
            
    - else
      %tr
        %td{colspan: '5'}
          .text-center No messages
